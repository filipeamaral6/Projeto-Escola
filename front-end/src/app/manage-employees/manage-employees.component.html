<app-alert></app-alert>
<div
  class="row"
  style="padding-left: 15px; padding-right:15px; padding-top: 15px;"
>
  <div class="col-md-4 form-group searchContainer" style="padding-left: 0px;">
    <i class="material-icons searchIcon">search</i>
    <input
      type="text"
      class="form-control searchBox"
      name="searchString"
      placeholder="Type to search..."
      [(ngModel)]="searchString"
    />
  </div>
  <div
    class="col-md-4"
    *ngIf="currentUser.authorities[0].authority === 'ROLE_ADMIN'"
    style="padding-top: 8px"
  >
    <div class="custom-control custom-radio custom-control-inline">
      <input
        class="custom-control-input"
        id="customRadio2"
        type="radio"
        name="activeGroup"
        value="active"
        (click)="fetchActiveEmployees($event)"
        checked
      /><label class="custom-control-label" for="customRadio2">Active</label>
    </div>
    <div class="custom-control custom-radio custom-control-inline">
      <input
        type="radio"
        id="customRadio3"
        name="activeGroup"
        value="inactive"
        (click)="fetchInactiveEmployees($event)"
        class="custom-control-input"
      /><label class="custom-control-label" for="customRadio3">Inactive</label>
    </div>
    <div class="custom-control custom-radio custom-control-inline">
      <input
        class="custom-control-input"
        id="customRadio1"
        id="customRadio1"
        type="radio"
        name="activeGroup"
        value="all"
        (click)="fetchEmployeesEvent($event)"
      /><label class="custom-control-label" for="customRadio1">All</label>
    </div>
  </div>
</div>
<div class="table-title" style="margin-top: 5px;">
  <div class="row">
    <div class="col-sm-6">
      <h3>Employee <b>Management</b></h3>
    </div>
    <div class="col-sm-6">
      <a (click)="onNewEmployee()" class="btn btn-primary" id="new-employee"
        ><i class="material-icons">&#xE147;</i> <span>New Employee</span></a
      >
      <a (click)="onExportToCsv()" class="btn btn-success" id="export-csv"
        ><i class="material-icons">&#xE24D;</i> <span>Export to Excel</span></a
      >
    </div>
  </div>
</div>
<div *ngIf="isLoading" style="text-align: center;">
  <br />
  <app-loading-spinner></app-loading-spinner>
</div>
<table class="table table-striped table-hover" *ngIf="!isLoading">
  <thead>
    <tr>
      <th>#</th>
      <th>Name</th>
      <th>Company Email</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr
      *ngFor="
        let employee of employees
          | paginate: { itemsPerPage: 10, currentPage: p }
          | filter: 'fullName':searchString
      "
    >
      <td>{{ employee.id }}</td>
      <td>{{ employee.fullName }}</td>
      <td>{{ employee.email }}</td>
      <td>{{ employee.status }}</td>
      <td>
        <a
          class="view"
          title="View Employee"
          data-toggle="tooltip"
          style="cursor: pointer;"
          [routerLink]="['/employees/detail/', employee.id]"
        >
          <i class="material-icons">visibility</i>
        </a>
        <a
          class="edit"
          title="Edit Employee"
          data-toggle="tooltip"
          [routerLink]="['/employees/edit/', employee.id]"
          style="cursor: pointer;"
        >
          <i class="material-icons">edit</i>
        </a>
        <!--  <a
            class="delete"
            title="Delete"
            data-toggle="tooltip"
            (click)="onDeleteEmployee(employee.id, employee.firstName)"
            style="cursor: pointer;"
            *ngIf="
              currentUser.authorities[0].authority === 'ROLE_ADMIN' &&
              currentUser.username !== employee.username
            "
          >
            <i class="material-icons">delete</i></a
          > -->
      </td>
    </tr>
  </tbody>
</table>
<div class="pagination">
  <pagination-controls
    (pageChange)="p = $event"
    class="myPagination"
  ></pagination-controls>
</div>
